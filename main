#include <serv.h>
#include<Servo.h>
#include <string.h>
Servo microServo;
int servoPin = 10;

void setup() {
  Serial.begin(9600);
  microServo.attach(servoPin);
  pinMode(13, OUTPUT);
  pinMode(8, OUTPUT);

}

void loop() {
  //Вызов функий
      String lettersOrig = serv(commandLoop(command));
      Serial.print("");

      String numberOrig = serv(commandLoop(command));
      Serial.print("");

      //Запрос ID
      if (commandLoop(command) == "/id") Serial.println("02");
      else Serial.print("");

      //Работа с сервой
      if (lettersOrig == "servo")
      {
        int corner = numberOrig.toInt(); //если число, то из stringName.toInt()
        if (corner > 180) Serial.print("");
        else microServo.write(corner);
      }
      else Serial.print("");

      //Работа с led'ом
      if (lettersOrig == "led" && numberOrig == "on")
      {
        digitalWrite(13, HIGH);
      }
      else if (lettersOrig == "led" && numberOrig == "off")
      {
        digitalWrite(13, LOW);
      }
      else Serial.print("");

      //PWM
      if (lettersOrig == "pwm")
      {
        if (numberOrig.toInt() > 255) Serial.print("");
        else analogWrite(8, numberOrig.toInt());
      }

}
